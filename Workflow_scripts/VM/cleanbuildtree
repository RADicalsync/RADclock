#!/usr/bin/env bash
# #!/bin/bash

Based="$HOME/FFkernel_Work"
RADsource=$Based/RADclock_working

## Files that are not cleaned:
#    all source files from repo 
#    version.m4  as is generated by an independent process via version.sh, but is needed to make a dist
#       - is overwritten only when a new dist is generated:  this becomes the PACKAGE version
#    distribution  radclock-tag.tar.gz  files, since rare and may want to copy elsewhere
#    */.dep directories, though their contents are cleared

echo Cleaning Working Build Tree rooted at $RADsource [source files unaffected]

pushd $RADsource 
NINIT="`ls -al|wc -l`"

# Remove radclock outputs
rm -f *.{log,out,raw,conf} *~ tmp

# Remove configure outputs (both object files and scripts, including all Makefiles)
make -k -s distclean		# -k: exit ok even if fail   -s quiet running
rm -f tests/.deps/*			# not removed automatically, should find out why!

# Remove automake outputs
rm -f config.* ltmain.sh install-sh compile missing Makefile.in
rm -f */Makefile.in 

# Remove autoconf outputs
rm -f -r  configure{,.scan} depcomp aclocal.m4 autom4te.cache 

# Remove standard Build System files that will be recreated
rm -f INSTALL

#ls -al
echo "Initially had $NINIT lines"
echo "Now has $(ls -al|wc -l) lines"

popd
